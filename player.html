<!--
╔══════════════════════════════════════════════════════════════════════════════╗
║                     Korean Live TV Streaming Player                          ║
║                                                                              ║
║  Description: A high-performance HTML5 streaming player for Korean TV       ║
║               channels using HLS (HTTP Live Streaming) technology           ║
║                                                                              ║
║  Features:                                                                   ║
║    • 70+ Korean TV channels (News, Sports, Entertainment, Kids, etc.)       ║
║    • EPG (Electronic Program Guide) tooltips with NOW/NEXT info             ║
║    • Pure CSS channel buttons (no external image dependencies)              ║
║    • Optimized rendering with DocumentFragment                              ║
║    • Search functionality to filter channels                                ║
║    • Channel categories for easy navigation                                 ║
║    • Error handling and loading states                                      ║
║    • Responsive design for mobile and desktop                               ║
║    • HLS.js integration with fallback for native HLS support               ║
║                                                                              ║
║  Technology Stack:                                                           ║
║    • HLS.js - HTTP Live Streaming library                                   ║
║    • Vanilla JavaScript - No framework dependencies                         ║
║    • CSS3 - Modern styling with Grid and Flexbox                            ║
║                                                                              ║
║  Browser Support:                                                            ║
║    • Chrome, Firefox, Edge: Uses HLS.js                                     ║
║    • Safari, iOS: Native HLS support                                        ║
║                                                                              ║
║  Version: 2.1                                                                ║
║  Last Updated: 2025-10-04                                                    ║
╚══════════════════════════════════════════════════════════════════════════════╝
-->
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Watch Korean Live TV channels online - Free HLS streaming player">
    <meta name="keywords" content="Korean TV, Live Stream, KBS, MBC, SBS, tvN, JTBC">
    <title>韩国电视直播 - Korean Live TV Streaming</title>

    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>📺</text></svg>">

    <!-- HLS.js library for HTTP Live Streaming support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>

    <style>
        /* ===== GLOBAL STYLES ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        /* ===== VIDEO PLAYER SECTION ===== */
        #video-container {
            width: 100%;
            background-color: #000;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            position: relative;
        }

        video {
            width: 100%;
            height: 70vh;
            max-height: 600px;
            background-color: #000;
            display: block;
        }

        /* Loading indicator for video */
        #loading-indicator {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #fff;
            font-size: 18px;
            display: none;
            z-index: 10;
        }

        #loading-indicator.active {
            display: block;
        }

        /* Current channel info display */
        #current-channel {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.7);
            color: #fff;
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            z-index: 10;
        }

        /* ===== CONTROLS SECTION ===== */
        #controls-container {
            background: #fff;
            padding: 20px;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
        }

        #search-container {
            max-width: 600px;
            margin: 0 auto 20px;
        }

        #search-input {
            width: 100%;
            padding: 12px 20px;
            font-size: 16px;
            border: 2px solid #ddd;
            border-radius: 25px;
            outline: none;
            transition: border-color 0.3s;
        }

        #search-input:focus {
            border-color: #667eea;
        }

        /* Category filter buttons */
        #category-filter {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .category-btn {
            padding: 8px 16px;
            border: 2px solid #667eea;
            background: #fff;
            color: #667eea;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s;
        }

        .category-btn:hover,
        .category-btn.active {
            background: #667eea;
            color: #fff;
        }

        /* ===== CHANNEL GRID ===== */
        #channel-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 15px;
            padding: 20px;
            background: #f8f9fa;
            max-width: 1400px;
            margin: 0 auto;
        }

        /* Channel button styling - Pure CSS, no external images */
        .channel-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            border: none;
            border-radius: 12px;
            padding: 20px 10px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            text-align: center;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            word-wrap: break-word;
            position: relative;
            overflow: visible; /* Changed from hidden to visible for EPG tooltip */
        }

        .channel-btn::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, transparent 70%);
            opacity: 0;
            transition: opacity 0.3s;
            border-radius: 12px; /* Match button border-radius to contain effect */
        }

        .channel-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
        }

        .channel-btn:hover::before {
            opacity: 1;
        }

        .channel-btn:active {
            transform: translateY(-1px) scale(1.02);
        }

        /* Active/playing channel style */
        .channel-btn.playing {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            box-shadow: 0 6px 20px rgba(245, 87, 108, 0.4);
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        /* Hidden channel (for search/filter) */
        .channel-btn.hidden {
            display: none;
        }

        /* Category-specific colors */
        .channel-btn[data-category="news"] {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        }

        .channel-btn[data-category="sports"] {
            background: linear-gradient(135deg, #30cfd0 0%, #330867 100%);
        }

        .channel-btn[data-category="entertainment"] {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
        }

        .channel-btn[data-category="kids"] {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
        }

        /* ===== RESPONSIVE DESIGN ===== */
        @media (max-width: 768px) {
            video {
                height: 50vh;
            }

            #channel-grid {
                grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
                gap: 10px;
                padding: 10px;
            }

            .channel-btn {
                padding: 15px 5px;
                font-size: 12px;
                min-height: 60px;
            }

            #current-channel {
                font-size: 14px;
                padding: 8px 15px;
            }

            .category-btn {
                font-size: 12px;
                padding: 6px 12px;
            }
        }

        /* ===== ERROR MESSAGE ===== */
        #error-message {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #f44336;
            color: #fff;
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            display: none;
            z-index: 1000;
            max-width: 300px;
        }

        #error-message.show {
            display: block;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* ===== EPG TOOLTIP STYLES ===== */
        .epg-tooltip {
            position: absolute;
            bottom: 110%;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.98) 0%, rgba(118, 75, 162, 0.98) 100%);
            color: #fff;
            padding: 16px;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            min-width: 280px;
            max-width: 320px;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease, transform 0.3s ease;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .epg-tooltip::before {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 8px solid transparent;
            border-right: 8px solid transparent;
            border-top: 8px solid rgba(118, 75, 162, 0.98);
        }

        .channel-btn:hover .epg-tooltip {
            opacity: 1;
            transform: translateX(-50%) translateY(-5px);
        }

        .epg-tooltip h4 {
            margin: 0 0 12px 0;
            font-size: 16px;
            font-weight: 700;
            border-bottom: 2px solid rgba(255, 255, 255, 0.3);
            padding-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .epg-tooltip h4::before {
            content: '📺';
            font-size: 18px;
        }

        .epg-program {
            margin-bottom: 10px;
            padding: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            border-left: 3px solid #fee140;
        }

        .epg-program:last-child {
            margin-bottom: 0;
            border-left-color: #a8edea;
        }

        .epg-time {
            font-size: 11px;
            font-weight: 600;
            color: #fee140;
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .epg-time::before {
            content: '🕒';
            font-size: 12px;
        }

        .epg-title {
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 3px;
            line-height: 1.3;
        }

        .epg-desc {
            font-size: 11px;
            opacity: 0.9;
            line-height: 1.4;
        }

        .epg-badge {
            display: inline-block;
            background: rgba(254, 225, 64, 0.3);
            color: #fee140;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: 700;
            margin-left: 6px;
        }

        .epg-no-data {
            text-align: center;
            padding: 12px;
            font-size: 13px;
            opacity: 0.8;
            font-style: italic;
        }
    </style>
</head>
<body>
    <!-- Video Player Section -->
    <div id="video-container">
        <video id="video" controls></video>
        <div id="loading-indicator">Loading stream...</div>
        <div id="current-channel">Select a channel</div>
    </div>

    <!-- Error Message Display -->
    <div id="error-message"></div>

    <!-- Controls and Channel Selection -->
    <div id="controls-container">
        <!-- Search Bar -->
        <div id="search-container">
            <input
                type="text"
                id="search-input"
                placeholder="🔍 搜索频道... / Search channels..."
                aria-label="Search channels"
            >
        </div>

        <!-- Category Filters -->
        <div id="category-filter">
            <button class="category-btn active" data-category="all">全部 All</button>
            <button class="category-btn" data-category="major">主流 Major</button>
            <button class="category-btn" data-category="news">新闻 News</button>
            <button class="category-btn" data-category="sports">体育 Sports</button>
            <button class="category-btn" data-category="entertainment">娱乐 Entertainment</button>
            <button class="category-btn" data-category="kids">儿童 Kids</button>
        </div>

        <!-- Channel Grid -->
        <div id="channel-grid"></div>
    </div>

    <script>
        // ===== CONFIGURATION AND INITIALIZATION =====

        const video = document.getElementById('video');
        const channelGrid = document.getElementById('channel-grid');
        const searchInput = document.getElementById('search-input');
        const currentChannelDisplay = document.getElementById('current-channel');
        const loadingIndicator = document.getElementById('loading-indicator');
        const errorMessage = document.getElementById('error-message');
        const categoryBtns = document.querySelectorAll('.category-btn');

        let hls = null;
        let currentChannel = null;

        // ===== CHANNEL DATA =====
        // Each channel has: name, url (M3U8 stream), and category
        const channels = [
            // Major Broadcasters
            { name: "KBS1", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=kbs1_540&sid=fyAvvD3F74POZh6GmE2btRtXE3FRA7x4WA5l1B5m&secret=f1ecf5d3c1cda86dc1eb741cec2e91bf&time=1742499426", category: "major" },
            { name: "KBS2", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=kbs2_540&sid=nGwIH0XSiD8i6BgNlw1BzsZ9ZkNGavHRb7KWRaUB&secret=24378334b2628dc756899977221fbe37&time=1742499579", category: "major" },
            { name: "MBC", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=mbc_540&sid=OiF7QW8tv67KzSp46AumV3RRfFzaM23xbWGWK1EE&secret=52841b1a2fc1ea3572f35742831c2823&time=1746640316", category: "major" },
            { name: "SBS", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=sbs_540&sid=pgl0MLCBpuhYsXqyNXvAxTpnwsO7Z0LIv6TjzgW7&secret=3890d3e89e3ba3c4fe9c7bf7e93b7db1&time=1746640387", category: "major" },
            { name: "EBS1", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=ebs_1_540&sid=hYnLduDv8nt54u8V33fzOzX2965Hpw5riMGhlJ3R&secret=49acbb73b9d018958342b304a2c5c7f4&time=1742556411", category: "major" },
            { name: "EBS2", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=ebs_2_540&sid=0wonnSSHsGui3yCUVS2h68L4nXKpocbek6UATVNu&secret=b6c54f84829101b5d1159e0143a063e1&time=1742556563", category: "major" },

            // Entertainment Channels
            { name: "tvN", url: "http://warlock0.synology.me:9999/klive/api/url.m3u8?m=url&s=tving&i=C00551&q=FHD&apikey=5MY50EII66", category: "entertainment" },
            { name: "JTBC", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=jtbc_540&sid=ueRIPcU1CmpLxvesJU3p3VVgAfWDA7Gq6Ok1SwdS&secret=7e0fd7ca14ec47bd96aca368dade12a4&time=1742499897", category: "entertainment" },
            { name: "JTBC3", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=jtbc_3_540&sid=Apn7LTiUje3L7FmQObTgYnKBNeDUDytdiUSkqYw1&secret=7e6facc78d8f68a85388b1945d966a04&time=1742501522", category: "entertainment" },
            { name: "OCN", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=ocn_540&sid=PrqoQCvTSMHCbYJxID74xAc3NKuScy5PRuM1xirg&secret=562fb04d97cad7f46e7b55f63214df25&time=1747425397", category: "entertainment" },
            { name: "OCN Movies", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=cgv_540&sid=ITjFbSesTCA6lhGQOkb3FkEBcBDIkkRJMIxUQdCp&secret=5d308748415770c93f1f9f0c0ed6e8b6&time=1747425455", category: "entertainment" },
            { name: "OCN Movies2", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=super_action_540&sid=QPacI6i2eH4RJ3EUx6gV4cCyzBRIBmJJyITwSCrN&secret=20e95b15862eb7628d7e1db6ef6dff2d&time=1742502255", category: "entertainment" },
            { name: "CJ ENM Movie", url: "https://jmp2.uk/stvp-KRBC32000191N", category: "entertainment" },
            { name: "PLAYY", url: "https://jmp2.uk/stvp-KR12000017G", category: "entertainment" },
            { name: "MNet", url: "http://warlock0.synology.me:9999/klive/api/url.m3u8?m=url&s=tving&i=C00579&q=FHD&apikey=5MY50EII66", category: "entertainment" },
            { name: "tvN Show", url: "http://warlock0.synology.me:9999/klive/api/url.m3u8?m=url&s=tving&i=C01141&q=FHD&apikey=5MY50EII66", category: "entertainment" },
            { name: "tvN STORY", url: "https://jmp2.uk/stvp-KRBC3200014XZ", category: "entertainment" },
            { name: "tvN DRAMA", url: "http://warlock0.synology.me:9999/klive/api/url.m3u8?m=url&s=tving&i=C01143&q=FHD&apikey=5MY50EII66", category: "entertainment" },
            { name: "ENA", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=kbs_joy_540&sid=tLqu4O06OBUd42Bf6pQzEj5iFGeblET7JuLcQfc7&secret=9b1bada69fe289f71ac1e24e8376b857&time=1742501919", category: "entertainment" },
            { name: "MBC every1", url: "https://tistory1.daumcdn.net/tistory/2864485/skin/images/CATV_223_D2C739D6.m3u8", category: "entertainment" },
            { name: "SBS Plus", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=sbs_plus_540&sid=syCIAWw5LA5R9EkVZhUAQgU7aMIoy8ojVwul0T1b&secret=406c160188ee60dacd0829b4d801fc2e&time=1742560026", category: "entertainment" },
            { name: "Channel E", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=channel_e_540&sid=y8c3beG6YJJDp9UMDq1kKSrl1NC0wY4mjXGAlZP6&secret=9ae1c63d7157e00c9298122b44e8e081&time=1742560086", category: "entertainment" },
            { name: "KBS Drama", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=kbs_drama_540&sid=q3B5WSCH4URY8GiHOmAi4YrNVPWKot9vVlo9Vif3&secret=af52b1a2db7f1a11eee422a86931dfa4&time=1742559860", category: "entertainment" },
            { name: "코메디TV", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=comedy_540&sid=VwrbOrArABoCGtqRD7p4O5o3TLyqonOhScABtAo7&secret=2fe9f41d49ae8ea23b419e850b69671d&time=1742501996", category: "entertainment" },
            { name: "MBC On", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=mbc_on_540&sid=1n0TiOLYplMhPQUiUnKKf3j1UuULzQWKwPSDBrkt&secret=0a8915eba29dd2179cd38d8f7fb004ba&time=1742502620", category: "entertainment" },

            // News Channels
            { name: "YTN", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=ytn_540&sid=HxS8g2O614Z22pnhG5974Hey06SlgSHeT24eUPwD&secret=3d4c2a8304d1673ecd3114c5c6f48568&time=1742500356", category: "news" },
            { name: "뉴스Y", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=newsy_540&sid=DzpUFHjcsBWVT59UIekH9Ru1NlsNITdMENCIwOYj&secret=627df873aaaabccbbfacb5cf54826ff2&time=1742500601", category: "news" },
            { name: "CNN", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=cnn_kr_540&sid=7ySL8aoIyy2NPbS1ENkvzkgj9C3GvJq2bdQ7PneQ&secret=0477f93d5d7e29a87ad3482bd1ecf100&time=1742558366", category: "news" },
            { name: "BBC", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=bbc_kr_540&sid=NvDfJvaZ3zU7NbrHR43AaUgWJK2zdoOc8KCQzTll&secret=aa2b347766700a37e0d86da63886687d&time=1742558446", category: "news" },
            { name: "NHK World", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=nhk_wold_540&sid=VQ5jdk6wCPjw6VcPfOv76Syot6CoP9YgzBLFeHjZ&secret=a86dad9133b53ffc834fe98b63c98919&time=1742558568", category: "news" },
            { name: "TV조선", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=tvchosun_540&sid=fKZsnPIjdoVZrjIWsqL5dPcQwba75T2ANFPAQIih&secret=18d00e092d1f8fa5a6107f0328ff4972&time=1742500050", category: "news" },
            { name: "채널A", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=channela_540&sid=zLhHxUtd4yz2toiohNMEfx63yhemDSOd2xgsFaBV&secret=ad760dc9b77c911e341d5e114e36feff&time=1742500133", category: "news" },
            { name: "MBN", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=mbn_540&sid=JrgTsnJKQo0TU9yiyoZf7eA9llHJEMpTQlgyggsJ&secret=68b0e61613ec8fda51fd248052b6aa69&time=1742500229", category: "news" },
            { name: "한국경제", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=wowtv_540&sid=78aYN4ktf0r1dt55tnyXZwly6i1geE6psoDdZvce&secret=d1de772e9eeb5dcf1636c239f633cdb2&time=1742500679", category: "news" },

            // Sports Channels
            { name: "tvN Sports", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=olivetv_540&sid=8LbyMvKsXavagjD6y1ZNlDZMivTbD8w8Ylaki0aF&secret=4f3264b31cd2376538d9af4207f9be85&time=1745187636", category: "sports" },
            { name: "KBSNSPORTS", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=kbs_n_sports_540&sid=2d4lU588IfghL2opd7HM63yE2wS8H52ARHw5HXRQ&secret=2352918e6d64f698127757fa594e1ff4&time=1742500742", category: "sports" },
            { name: "MBC SPORTS", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=mbc_sports_540&sid=9bv6hEGMpr1RCdE1DpMiWx2PrX8a8kKE1GMt0dJ6&secret=acef719ee24b555d553a928126e2bbd1&time=1742500830", category: "sports" },
            { name: "SKY SPORTS", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=sky_sports_540&sid=izUD3XjpFBIK6xFNQ1BcgBGH5Ldy0HVkyD5UoRSO&secret=63f2413d9711c04b1a825c8e733a5204&time=1756907428", category: "sports" },
            { name: "SBS SPORTS", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=sbs_sports_540&sid=XMv6aPlBrU1o23QTwnURWnfHoRT7hOQ8nwH7wK9H&secret=849647c33502f9f8d1a1d67e20719008&time=1742501076", category: "sports" },
            { name: "SBS GOLF", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=sbs_golf_540&sid=8No4oKWpRJMbb9rsAuWQ75ACx37sUj3gRkeLupvY&secret=72464b0ac707bb73f4d46a2e1082e64f&time=1748029685", category: "sports" },
            { name: "JTBC GOLF", url: "http://211.110.63.98/jtbcgolf1/_definst_/8C4A78EB4291B2BA8795B9AF907E8A9B28DBF956ADF0AB46A0C5E48207BC8773/chunklist_w1885910863.m3u8", category: "sports" },
            { name: "JTBC GOLF&SPORTS", url: "http://211.110.63.98/jtbc3sports1/_definst_/92EE8BC280FBC3F170429AC55F0234B0E9A288DD1A54804514EA4B2D1D861D79/chunklist_w2059444615.m3u8", category: "sports" },
            { name: "PGA Tour", url: "https://jmp2.uk/stvp-KRBD3100007WB", category: "sports" },
            { name: "스크린골프", url: "https://jmp2.uk/stvp-KR44000010Y", category: "sports" },
            { name: "SPOTV", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=spotv_540&sid=w9sTaDbkcNRJ1Op6LvowKsB9qiIwEXaLK6jQmc9a&secret=700a37478a2572879ff8a64e7e43faa9&time=1742501358", category: "sports" },
            { name: "SPOTV2", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=spotv_2_540&sid=JCn330xSXpDUtieRguQzRx0q5D2azRNty2G69TqK&secret=a8bf52caed9a7411a14c3dbcaf4f70b4&time=1742501441", category: "sports" },
            { name: "SPOTV Prime", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=spotv_prime_540&sid=V1R87ydx8jeZbnselXMKDBx9IPKMXNa5Zv7Iqv31&secret=79ee49d5533da8320bdd61ec92cd4ded&time=1742501589", category: "sports" },
            { name: "SPOTV On", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=spotv_on_540&sid=khuvDUGA5oq5SVN9qUTdlNpFKsr85NI7poL0OHU7&secret=4b9ae05ec416ae0275d3cee4511e7f7b&time=1742501659", category: "sports" },
            { name: "BilliardsTV", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=billiardstv_540&sid=dhbSSmqXjzcAIi6TV9nwpPQYU97Q5dFXLAFrT4EA&secret=7b49ace0e217934036273cc10a61f817&time=1742501837", category: "sports" },
            { name: "IB SPORTS", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=jtbc_3_540&sid=Apn7LTiUje3L7FmQObTgYnKBNeDUDytdiUSkqYw1&secret=7e6facc78d8f68a85388b1945d966a04&time=1742501522", category: "sports" },
            { name: "SKY SPORTS F1", url: "http://fortv.cc:8080/clarencekingrh@hotmail.com/pKgSdl4ZFX/35244", category: "sports" },
            { name: "OGN starleague", url: "https://jmp2.uk/stvp-KRBC3200005SH", category: "sports" },

            // Kids and Educational
            { name: "중화TV", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=chinesetv_540&sid=ZhoPSyCssGAH4bZqbgtiLGY2RRNtZkpxdNaqJ59Z&secret=d61b57728a4807c259df2dad974b8d5b&time=1742555489", category: "kids" },
            { name: "바둑TV", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=baduk_540&sid=BUdcXyBWIi9dQgC9QbarQyw1r2Punh3ScBDyvPkx&secret=46f15e2f7aa89b944adadb345e1d66af&time=1742555602", category: "kids" },
            { name: "브레인TV", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=brain_tv_540&sid=pXLsKDVuSzSlCPzDBtZ3Tjp06jRx0Cjb6hMFnxt4&secret=1f34a19c2968298e793fc294a26ec99c&time=1742555675", category: "kids" },
            { name: "FTV", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=ftv_540&sid=bZKhHcxaPkJGE3mmH8UPN66ooPuufcWyGBuvtjTO&secret=5d91e5de24f5cb3123ee6e659939bdb5&time=1742555798", category: "kids" },
            { name: "네셔날지오그래피", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=national_540&sid=Frw4dKWvqJLBjvHgByjOVO1M8zkSD6LjvUABHvLS&secret=5c8e0f0753609c3db02f0a5a0786ccd1&time=1742555875", category: "kids" },
            { name: "디스커버리", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=discovery_540&sid=2iObz48WCFCkHcuaQTRez5kpeHPfdHYiOE1icCKS&secret=660b5a2059948553effae93e4def6d04&time=1742555991", category: "kids" },
            { name: "Nat Geo Wild", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=nat_geo_wild_540&sid=0wJqyjtLKS6wxrUnZ6cnaRHDVz6ztklaA1tOzALv&secret=8a3bcec4a32f89003264607c049a2ce3&time=1742556081", category: "kids" },
            { name: "History", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=history_540&sid=ktDYnxAlcjz7V3RTfpIGFtr5pGjLTXXbuEqQQTjG&secret=fa393d7a7f8b5c570fa9a02d67e5ddb8&time=1742556221", category: "kids" },
            { name: "iNET", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=inet_540&sid=OPbFOFpoTQ729gz3U05zWdlE920QJze3POZPfHuO&secret=5121ac51f8f56d26f013a0db2cbe06e9&time=1742556350", category: "kids" },
            { name: "JEI 재능TV", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=jei_jenung_540&sid=5x1n6FyzRQMkri2LhZ71Mjao59LSpdVKNNnvDkJW&secret=1fd8004ee3d2c119d064ec88b38d97b3&time=1742556811", category: "kids" },
            { name: "육아방송", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=child_care_540&sid=MCMbs5pnRCoyIVAPtv5g0MRDu11MEoQNUSSpZfsk&secret=706abe245cd1b8483e082c3ee34c19b3&time=1742556877", category: "kids" },
            { name: "뽀요 TV", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=disney_channel_540&sid=f6coDFH9FZGv5Tl9FZinkVetugwWFq3RjSfNJIWl&secret=c0c2de490583ac54b9710cc8ac2a8636&time=1742556938", category: "kids" },
            { name: "KBS kids", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=kbs_kids_540&sid=6GIrIVmGxADvFwNcDZn2ZKO972L101Y0O54pvVUu&secret=e5d3211063e265afd0cd9f542d9d3de2&time=1742557009", category: "kids" },
            { name: "Toonivers", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=tooniverse_540&sid=eCxHR168RlUUkQqYOIWVyWfIUxPu06nBlSxHIO46&secret=96b99d3a3fdfca5375de61e8c24350b4&time=1742557506", category: "kids" },
            { name: "Cartoon", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=cartoon_network_540&sid=RyguKlLteLqv9rk0RS2MXuF7i1rMwPylYuihkE8h&secret=285476c7f0a52c71c066532526326dde&time=1742558094", category: "kids" },
            { name: "어린이TV", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=childrens_tv_540&sid=bacS5e2f2oSXK0Jq8h8erviPliIz00vJqZSDx7AV&secret=e37983794947e47b83649a92de60f3da&time=1742558216", category: "kids" },
            { name: "ANIPLUS", url: "http://warlock0.synology.me:9999/klive/api/url.m3u8?m=url&s=tving&i=C00901&q=FHD&apikey=5MY50EII66", category: "kids" },

            // Shopping
            { name: "현대홈쇼핑", url: "https://live-edge-th136.myjktv.com:443/watch/live.m3u8?video=hyundaih_mall_540&sid=kRIZglDoTkTX95OSEfXY5VUZFpfFq6cVReRRuWSR&secret=fb19ea96320fbea13ea32914018bf9af&time=1742560145", category: "entertainment" }
        ];

        // ===== EPG DATA (Electronic Program Guide) =====
        // Static program schedule data for demonstration
        // Format: { "ChannelName": [{ time, title, desc }, ...] }
        const epgData = {
            "KBS1": [
                { time: "19:00-20:00", title: "KBS 뉴스 9", desc: "오늘의 주요 뉴스와 심층 분석" },
                { time: "20:00-21:00", title: "일일연속극", desc: "가족드라마 - 일상 속 따뜻한 이야기" }
            ],
            "KBS2": [
                { time: "19:00-20:00", title: "개그콘서트", desc: "주말을 웃음으로 가득 채우는 코미디 쇼" },
                { time: "20:00-22:00", title: "주말드라마", desc: "감동과 재미를 선사하는 프라임 드라마" }
            ],
            "MBC": [
                { time: "19:00-20:00", title: "MBC 뉴스데스크", desc: "종합 뉴스 프로그램" },
                { time: "20:00-21:30", title: "나 혼자 산다", desc: "1인 가구의 리얼 라이프 버라이어티" }
            ],
            "SBS": [
                { time: "19:00-20:00", title: "SBS 8시 뉴스", desc: "오늘의 핫이슈와 속보" },
                { time: "20:00-22:00", title: "런닝맨", desc: "대한민국 대표 예능 - 미션 레이스" }
            ],
            "tvN": [
                { time: "19:00-20:30", title: "유 퀴즈 온 더 블럭", desc: "유재석과 조세호의 거리 토크쇼" },
                { time: "20:30-22:00", title: "tvN 드라마", desc: "화제의 오리지널 시리즈" }
            ],
            "JTBC": [
                { time: "19:00-20:00", title: "JTBC 뉴스룸", desc: "손석희 앵커의 심층 뉴스" },
                { time: "20:00-21:30", title: "아는형님", desc: "전학생들의 재치있는 토크배틀" }
            ],
            "YTN": [
                { time: "19:00-20:00", title: "YTN 뉴스", desc: "24시간 실시간 종합뉴스" },
                { time: "20:00-21:00", title: "뉴스 특보", desc: "오늘의 주요 이슈 심층 분석" }
            ],
            "MNet": [
                { time: "19:00-20:30", title: "엠카운트다운", desc: "K-POP 최신 차트와 무대" },
                { time: "20:30-22:00", title: "Show Me The Money", desc: "힙합 서바이벌 오디션" }
            ],
            "tvN Sports": [
                { time: "19:00-20:00", title: "스포츠 뉴스", desc: "오늘의 스포츠 하이라이트" },
                { time: "20:00-22:00", title: "프로야구 중계", desc: "KBO 리그 생중계" }
            ],
            "KBSNSPORTS": [
                { time: "19:00-21:00", title: "축구 중계", desc: "K리그 / 해외축구 생중계" },
                { time: "21:00-22:00", title: "스포츠 매거진", desc: "스포츠 이슈와 인터뷰" }
            ],
            "EBS1": [
                { time: "19:00-20:00", title: "다큐프라임", desc: "지식과 감동의 교양 다큐멘터리" },
                { time: "20:00-21:00", title: "세계테마기행", desc: "세계 각국의 문화와 자연 탐방" }
            ],
            "채널A": [
                { time: "19:00-20:00", title: "뉴스A", desc: "채널A 메인 뉴스" },
                { time: "20:00-21:30", title: "나는 SOLO", desc: "솔로들의 진짜 연애 리얼리티" }
            ],
            "TV조선": [
                { time: "19:00-20:00", title: "뉴스9", desc: "TV조선 종합 뉴스" },
                { time: "20:00-22:00", title: "미스터트롯", desc: "트로트 서바이벌 오디션" }
            ]
        };

        // ===== CORE FUNCTIONS =====

        /**
         * Play a channel stream
         * @param {string} url - M3U8 stream URL
         * @param {string} channelName - Name of the channel
         * @param {HTMLElement} targetBtn - Button element that was clicked
         */
        function playChannel(url, channelName, targetBtn) {
            // Show loading indicator
            loadingIndicator.classList.add('active');

            try {
                // Update current channel info
                currentChannel = channelName;
                currentChannelDisplay.textContent = `Now Playing: ${channelName}`;

                // Check if HLS.js is supported
                if (Hls.isSupported()) {
                    // Destroy previous HLS instance if exists
                    if (hls) {
                        hls.destroy();
                    }

                    // Create new HLS instance with optimized configuration
                    hls = new Hls({
                        enableWorker: true,
                        lowLatencyMode: true,
                        backBufferLength: 90
                    });

                    hls.loadSource(url);
                    hls.attachMedia(video);

                    // Handle manifest parsed event
                    hls.on(Hls.Events.MANIFEST_PARSED, function () {
                        video.play().catch(err => {
                            showError('播放失败 / Playback failed: ' + err.message);
                        });
                        loadingIndicator.classList.remove('active');
                    });

                    // Handle errors
                    hls.on(Hls.Events.ERROR, function (event, data) {
                        if (data.fatal) {
                            loadingIndicator.classList.remove('active');
                            showError(`流媒体错误 / Stream error: ${data.type}`);
                        }
                    });

                } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
                    // Native HLS support (Safari, iOS)
                    video.src = url;
                    video.addEventListener('loadedmetadata', function () {
                        video.play().catch(err => {
                            showError('播放失败 / Playback failed: ' + err.message);
                        });
                        loadingIndicator.classList.remove('active');
                    });
                } else {
                    showError('您的浏览器不支持HLS播放 / Your browser does not support HLS playback');
                    loadingIndicator.classList.remove('active');
                }

                // Update UI - highlight playing channel
                document.querySelectorAll('.channel-btn').forEach(btn => {
                    btn.classList.remove('playing');
                });
                targetBtn.classList.add('playing');

            } catch (error) {
                loadingIndicator.classList.remove('active');
                showError('播放失败 / Playback failed: ' + error.message);
            }
        }

        /**
         * Show error message to user
         * @param {string} message - Error message to display
         */
        function showError(message) {
            errorMessage.textContent = message;
            errorMessage.classList.add('show');
            setTimeout(() => {
                errorMessage.classList.remove('show');
            }, 5000);
        }

        /**
         * Create EPG tooltip HTML for a channel
         * @param {string} channelName - Name of the channel
         * @returns {string} HTML string for tooltip
         */
        function createEPGTooltip(channelName) {
            const programs = epgData[channelName];

            if (!programs || programs.length === 0) {
                return `
                    <div class="epg-tooltip">
                        <h4>${channelName}</h4>
                        <div class="epg-no-data">📺 节目信息暂无 / No program data available</div>
                    </div>
                `;
            }

            const programsHTML = programs.map((program, index) => {
                const badge = index === 0 ? '<span class="epg-badge">NOW</span>' : '<span class="epg-badge">NEXT</span>';
                return `
                    <div class="epg-program">
                        <div class="epg-time">${program.time}${badge}</div>
                        <div class="epg-title">${program.title}</div>
                        <div class="epg-desc">${program.desc}</div>
                    </div>
                `;
            }).join('');

            return `
                <div class="epg-tooltip">
                    <h4>${channelName}</h4>
                    ${programsHTML}
                </div>
            `;
        }

        /**
         * Render channel buttons using DocumentFragment for better performance
         */
        function renderChannels() {
            const fragment = document.createDocumentFragment();

            channels.forEach(channel => {
                const btn = document.createElement('button');
                btn.className = 'channel-btn';
                btn.dataset.category = channel.category;
                btn.dataset.name = channel.name.toLowerCase();
                btn.setAttribute('aria-label', `Play ${channel.name}`);

                // Add channel name and EPG tooltip
                btn.innerHTML = `
                    ${channel.name}
                    ${createEPGTooltip(channel.name)}
                `;

                btn.addEventListener('click', () => {
                    playChannel(channel.url, channel.name, btn);
                });

                fragment.appendChild(btn);
            });

            channelGrid.appendChild(fragment);
        }

        /**
         * Filter channels based on search query
         * @param {string} query - Search query string
         */
        function filterChannels(query) {
            const searchTerm = query.toLowerCase().trim();
            const channelBtns = document.querySelectorAll('.channel-btn');

            channelBtns.forEach(btn => {
                const channelName = btn.dataset.name;
                if (channelName.includes(searchTerm)) {
                    btn.classList.remove('hidden');
                } else {
                    btn.classList.add('hidden');
                }
            });
        }

        /**
         * Filter channels by category
         * @param {string} category - Category to filter
         */
        function filterByCategory(category) {
            const channelBtns = document.querySelectorAll('.channel-btn');

            channelBtns.forEach(btn => {
                if (category === 'all' || btn.dataset.category === category) {
                    btn.classList.remove('hidden');
                } else {
                    btn.classList.add('hidden');
                }
            });

            // Clear search input
            searchInput.value = '';
        }

        // ===== EVENT LISTENERS =====

        // Search functionality
        searchInput.addEventListener('input', (e) => {
            filterChannels(e.target.value);
        });

        // Category filter buttons
        categoryBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                // Update active button
                categoryBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');

                // Filter channels
                filterByCategory(btn.dataset.category);
            });
        });

        // Keyboard navigation support
        document.addEventListener('keydown', (e) => {
            if (e.key === '/' || (e.ctrlKey && e.key === 'f')) {
                e.preventDefault();
                searchInput.focus();
            }
        });

        // ===== INITIALIZATION =====

        // Render all channels on page load
        renderChannels();

        // Log initialization
        console.log(`✅ Player initialized with ${channels.length} channels`);
    </script>
</body>
</html>
